--- a/src/enchant.c	2010-04-01 23:53:37.000000000 +0300
+++ b/src/enchant.c	2021-04-07 14:50:02.000000000 +0300
@@ -209,6 +209,12 @@ enchant_get_module_dirs (void)
 
 	char * module_dir = NULL;
 	char * prefix = NULL;
+	
+	const char *envdir = g_getenv ("ENCHANT_MODULE_PATH");
+	if (envdir != NULL && *envdir != '\0')
+	{
+		module_dirs = enchant_slist_append_unique_path (module_dirs, g_strdup (envdir));
+	}
 
 	{
 		char* user_module_dir;
@@ -239,7 +245,8 @@ enchant_get_module_dirs (void)
 		module_dirs = enchant_slist_append_unique_path (module_dirs, module_dir);
 
 #if defined(ENCHANT_GLOBAL_MODULE_DIR)
-	module_dirs = enchant_slist_append_unique_path (module_dirs, g_strdup (ENCHANT_GLOBAL_MODULE_DIR));
+	if (envdir == NULL || *envdir == '\0')
+		module_dirs = enchant_slist_append_unique_path (module_dirs, g_strdup (ENCHANT_GLOBAL_MODULE_DIR));
 #else
 	/* Dynamically locate library and search for modules relative to it. */
 	prefix = enchant_get_prefix_dir();
@@ -259,6 +266,7 @@ enchant_get_conf_dirs (void)
 {
 	GSList *conf_dirs = NULL, *user_conf_dirs, *iter;
 	char * ordering_dir = NULL, * prefix = NULL;
+	char *xdg_data_dir;
 
 	user_conf_dirs = enchant_get_user_config_dirs();
 
@@ -291,6 +299,19 @@ enchant_get_conf_dirs (void)
 	conf_dirs = enchant_slist_append_unique_path (conf_dirs, g_strdup (ENCHANT_GLOBAL_ORDERING));
 #endif
 
+	xdg_data_dir = g_getenv ("XDG_DATA_DIRS");
+	if (xdg_data_dir)
+		{
+			char **xdg_ddirs = g_strsplit (xdg_data_dir, ":", 0);
+			char **xdg_iter;
+
+			for (xdg_iter = xdg_ddirs; *xdg_iter != NULL; xdg_iter++)
+				{
+					conf_dirs = enchant_slist_append_unique_path (conf_dirs, g_strdup(*xdg_iter));
+				}
+			g_strfreev (xdg_ddirs);
+		}
+
 	return conf_dirs;
 }
 
